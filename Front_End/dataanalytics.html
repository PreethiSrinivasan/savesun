<!DOCTYPE HTML>
<html>

<head>
  <title>Save Sun</title>
  <meta name="description" content="website description" />
  <meta name="keywords" content="website keywords, website keywords" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <!-- modernizr enables HTML5 elements and feature detects -->
  <script type="text/javascript" src="js/modernizr-1.5.min.js"></script>
</head>

<body background="F:\NASA Space App Challenge\css3bokeh-237545226\images\Sun_Logo.png">
  <div id="main">
    <header>
      <div id="logo">
        <div id="logo_text">
          <!-- class="logo_colour", allows you to change the colour of the text -->
          <h1><a href="index.html">Save<span class="logo_colour">Sun</span></a></h1>
          <h2>Save Energy using Solar radiation</h2>
        </div>
      </div>
      <nav>
        <div id="menu_container">
          <ul class="sf-menu" id="nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="examples.html">Add Applicances</a></li>
            <!-- <li><a href="page.html">Edit Appliances</a></li>!-->
            <li><a href="dataanalytics.html">Energy Spending Summary</a></li>
            <li><a href="about.html">About Us</a></li>
            
          </ul>
        </div>
      </nav>
    </header>
    <div id="site_content">
      <div id="sidebar_container">
        
        
        
      </div>

      <div class="content">
        <h1>Save Sun Team! </h1>
    <center>
        <form action="index.html" method="post">
          <div class="form_settings">
              
          </div>
        </form>
      </div>
    </div>
    <div id="scroll">
      <a title="Scroll to the top" class="top" href="#"></a>
    </div>


    <svg id="spending-bymonth" width="960" height="500"></svg>
    <svg id="spending-byperson" width="960" height="500"></svg>
    <svg id="personal-spending" width="960" height="500"></svg>

    <footer>
      <p><img src="images/twitter.png" alt="twitter" />&nbsp;<img src="images/facebook.png" alt="facebook" />&nbsp;<img src="images/rss.png" alt="rss" /></p>
      <p><a href="index.html">Home</a> | <a href="examples.html">Add Applicances</a> | <a href="page.html">A Page</a> | <a href="another_page.html">Another Page</a> | <a href="contact.php">Contact Us</a></p>
      <p>Copyright &copy; NASA Space Apps_Team_19 </p>
    </footer>
  </div>
  <!-- javascript at the bottom for fast page loading -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/jquery.easing-sooper.js"></script>
  <script type="text/javascript" src="js/jquery.sooperfish.js"></script>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var svg = d3.select("#spending-bymonth");
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);

var g = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var bar_text;

var bymonth = [
  {
    "date": 1,
    "energy": 90
  },
  {
    "date": 2,
    "energy": 79
  },
  {
    "date": 3,
    "energy": 34
  },
  {
    "date": 4,
    "energy": 23
  },
  {
    "date": 5,
    "energy": 43
  },
  {
    "date": 6,
    "energy": 54
  },
  {
    "date": 7,
    "energy": 32
  },
  {
    "date": 8,
    "energy": 33
  },
  {
    "date": 9,
    "energy": 22
  },
  {
    "date": 10,
    "energy": 11
  },
  {
    "date": 11,
    "energy": 10
  },
  {
    "date": 12,
    "energy": 32
  },
  {
    "date": 13,
    "energy": 44
  },
  {
    "date": 14,
    "energy": 28
  },
  {
    "date": 15,
    "energy": 19
  },
  {
    "date": 16,
    "energy": 22
  },
  {
    "date": 17,
    "energy": 10
  },
  {
    "date": 18,
    "energy": 32
  },
  {
    "date": 19,
    "energy": 30
  },
  {
    "date": 20,
    "energy": 11
  },
  {
    "date": 21,
    "energy": 35
  },
  {
    "date": 22,
    "energy": 22
  },
  {
    "date": 23,
    "energy": 32
  },
  {
    "date": 24,
    "energy": 42
  },
  {
    "date": 25,
    "energy": 21
  },
  {
    "date": 26,
    "energy": 55
  },
  {
    "date": 27,
    "energy": 23
  },
  {
    "date": 28,
    "energy": 20
  }
];
g.append("text")
    .attr("x", (width/2))
    .attr("y", 0)
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("text-decoration", "underline")
    .text("Daily Energy Consumption (kWh)")

viz(bymonth);
function viz(data) {

  x.domain(data.map(function(d) { return d.date; }));
  y.domain([0, d3.max(data, function(d) { return d.energy; })]);

  g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

  g.append("g")
      .attr("class", "axis axis--y")
      .call(d3.axisLeft(y))
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "0.71em")
      .attr("text-anchor", "end")
      .text("Energy");

  function highlight_bar(d) {
    bar_text = g.append("text").attr("x", x(d.date) + x.bandwidth()/2)
      .attr("y", y(d.energy) -5)
      .attr("width", x.bandwidth())
      .attr("height", height - y(d.energy) )
      .text(d.energy)
      .attr("class", "text")
      .style("display", "block");
  }
  //data binding
  g.selectAll(".bar")
    .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.date); })
      .attr("y", function(d) { return y(d.energy); })
      .attr("width", x.bandwidth())
      .attr("height", function(d) { return height - y(d.energy); })
      .text(function(d) { return d.energy; })
      .on("mouseover", function(d) {
        highlight_bar(d);
        }) 
      .on("mouseout", function() {
        bar_text.style("display", "none");
      })
      .on("click", function(d) { showDetail(d.date); });
};
function showPersonalUsage(name) {
  var byPerson = [
  {
    "name": "Jenny",
    "division": "heater",
    "energy": 1
  },
  {
    "name": "Jenny",
    "division": "cook",
    "energy": 3
  },
  {
    "name": "Jenny",
    "division": "bath",
    "energy": 7
  },
  {
    "name": "Jenny",
    "division": "entn",
    "energy": 1
  },
  {
    "name": "Harry",
    "division": "heater",
    "energy": 2
  },
  {
    "name": "Harry",
    "division": "cook",
    "energy": 3
  },
  {
    "name": "Harry",
    "division": "bath",
    "energy": 4
  },
  {
    "name": "Harry",
    "division": "entn",
    "energy": 13
  }
];
  var svg = d3.select("#personal-spending"),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

  svg.style("display", "block");
  var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
      y = d3.scaleLinear().rangeRound([height, 0]);

  svg.selectAll("g").remove();
  var g = svg.append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  g.append("text")
      .attr("x", (width/2))
      .attr("y", 0)
      .attr("text-anchor", "middle")
      .style("font-size", "16px")
      .style("text-decoration", "underline")
      .text("Energy Consumption (kWh)")
  viz(byPerson);
  function viz(data) {
    console.log(data);
    data = data.filter(function(d) {
      return d.name == name;
    })

    data = data.sort(function(a, b) {
      return b.energy - a.energy;
    });

    x.domain(data.map(function(d) { return d.division; }));
    y.domain([0, d3.max(data, function(d) { return d.energy; })]);

    g.append("g")
        .attr("class", "axis axis--x")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y))
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", "0.71em")
        .attr("text-anchor", "end")
        .text("Energy");

    //data binding
    g.selectAll(".bar")
      .data(data)
      .enter().append("rect")
        .attr("class", "bar")
        .attr("x", function(d) { return x(d.division); })
        .attr("y", function(d) { return y(d.energy); })
        .attr("width", x.bandwidth())
        .attr("height", function(d) { return height - y(d.energy); })
        .on("mouseover", function(d) {
          highlight_bar(d);
          }) 
        .on("mouseout", function() {
          bar_text.style("display", "none");
        });
  }

  function highlight_bar(d) {
    bar_text = g.append("text").attr("x", x(d.division) + x.bandwidth()/2)
      .attr("y", y(d.energy) - 5)
      .attr("width", x.bandwidth())
      .attr("height", height - y(d.energy) )
      .text(d.energy)
      .attr("class", "text")
      .style("display", "block");

  }
}
function showDetail(date) {
  var byPerson = [
  {
    "name": "Jenny",
    "energy": 12,
    "month": 1,
    "heater": 1,
    "cook": 3,
    "bath": 7,
    "entn": 1
  },
  {
    "name": "Jenny",
    "energy": 42,
    "month": 2,
    "heater": 10,
    "cook": 13,
    "bath": 8,
    "entn": 11
  },
  {
    "name": "Harry",
    "energy": 12,
    "month": 1,
    "heater": 1,
    "cook": 1,
    "bath": 3,
    "entn": 7
  },
  {
    "name": "Harry",
    "energy": 20,
    "month": 2,
    "heater": 2,
    "cook": 3,
    "bath": 4,
    "entn": 13
  },
  {
    "name": "Cloud",
    "energy": 34,
    "month": 1,
    "heater": 10,
    "cook": 2,
    "bath": 9,
    "entn": 13
  },
  {
    "name": "Cloud",
    "energy": 54,
    "month": 2,
    "heater": 29,
    "cook": 10,
    "bath": 2,
    "entn": 13
  },
  {
    "name": "Sunny",
    "energy": 23,
    "month": 1,
    "heater": 2,
    "cook": 4,
    "bath": 7,
    "entn": 10
  },
  {
    "name": "Sunny",
    "energy": 3,
    "month": 2,
    "heater": 0,
    "cook": 0,
    "bath": 3,
    "entn": 0
  }
];
  var svg = d3.select("#spending-byperson"),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

  svg.style("display", "block");
  var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
      y = d3.scaleLinear().rangeRound([height, 0]);

  svg.selectAll("g").remove();
  var g = svg.append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  g.append("text")
      .attr("x", (width/2))
      .attr("y", 0)
      .attr("text-anchor", "middle")
      .style("font-size", "16px")
      .style("text-decoration", "underline")
      .text("Energy Consumption by person (kWh)")
  viz(byPerson);
  function viz(data) {
    console.log(data);
    data = data.filter(function(d) {
      return d.month == date;
    })

    data = data.sort(function(a, b) {
      return b.energy - a.energy;
    });

    x.domain(data.map(function(d) { return d.name; }));
    y.domain([0, d3.max(data, function(d) { return d.energy; })]);

    g.append("g")
        .attr("class", "axis axis--x")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y))
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", "0.71em")
        .attr("text-anchor", "end")
        .text("Energy");

    //data binding
    g.selectAll(".bar")
      .data(data)
      .enter().append("rect")
        .attr("class", "bar")
        .attr("x", function(d) { return x(d.name); })
        .attr("y", function(d) { return y(d.energy); })
        .attr("width", x.bandwidth())
        .attr("height", function(d) { return height - y(d.energy); })
        .on("mouseover", function(d) {
          highlight_bar(d);
          }) 
        .on("mouseout", function() {
          bar_text.style("display", "none");
        })
        .on("click", function(d) { showPersonalUsage(d.name); });
  }

  function highlight_bar(d) {
    bar_text = g.append("text").attr("x", x(d.name) + x.bandwidth()/2)
      .attr("y", y(d.energy) - 5)
      .attr("width", x.bandwidth())
      .attr("height", height - y(d.energy) )
      .text(d.energy)
      .attr("class", "text")
      .style("display", "block");

  }
}

/*
fetch("http://google.com")
  .then(function(data) {
    console.log(data);
  });
*/

</script>

  <script type="text/javascript">
    $(document).ready(function() {
      $('ul.sf-menu').sooperfish();
      $('.top').click(function() {$('html, body').animate({scrollTop:0}, 'fast'); return false;});
    });
  </script>
</body>
</html>
